<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NanoPLY: The NanoPLY Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NanoPLY
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">The NanoPLY Library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The NanoPLY is a C++ header-only library to read and write PLY file. It allow to load and save polygonal meshes and point clouds.</p>
<p>NanoPLY does not require compiling or installing, just an #include &lt;<a class="el" href="nanoply_8hpp.html">nanoply.hpp</a>&gt; in your code.</p>
<h2>Examples </h2>
<p>The following code shows how to open and save a Ply file using a custom definition of mesh.</p>
<div class="fragment"><div class="line"><span class="comment">/****************************************************************************</span></div><div class="line"><span class="comment">* NanoPLY                                                                   *</span></div><div class="line"><span class="comment">* NanoPLY is a C++11 header-only library to read and write PLY file         *</span></div><div class="line"><span class="comment">*                                                                           *</span></div><div class="line"><span class="comment">* Copyright(C) 2014-2015                                                    *</span></div><div class="line"><span class="comment">* Visual Computing Lab                                                      *</span></div><div class="line"><span class="comment">* ISTI - Italian National Research Council                                  *</span></div><div class="line"><span class="comment">*                                                                           *</span></div><div class="line"><span class="comment">* This Source Code Form is subject to the terms of the Mozilla Public       *</span></div><div class="line"><span class="comment">* License, v. 2.0. If a copy of the MPL was not distributed with this       *</span></div><div class="line"><span class="comment">* file, You can obtain one at http://mozilla.org/MPL/2.0/.                  *</span></div><div class="line"><span class="comment">*                                                                           *</span></div><div class="line"><span class="comment">****************************************************************************/</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nanoply_8hpp.html">nanoply.hpp</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keywordtype">int</span> N&gt;</div><div class="line"><span class="keyword">struct </span>Container</div><div class="line">{</div><div class="line"></div><div class="line"><span class="keyword">public</span>:</div><div class="line">  T data[N];</div><div class="line"></div><div class="line">  Container(){}</div><div class="line"></div><div class="line">  Container(T* temp, <span class="keywordtype">int</span> n)</div><div class="line">  {</div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; std::min(n, N); i++)</div><div class="line">      data[i] = temp[i];</div><div class="line">  }</div><div class="line"></div><div class="line">  T* V()</div><div class="line">  {</div><div class="line">    <span class="keywordflow">return</span> data;</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordtype">bool</span> operator == (Container&lt;T, N&gt; <span class="keyword">const</span> &amp; m)<span class="keyword"> const</span></div><div class="line"><span class="keyword">  </span>{</div><div class="line">    <span class="keywordtype">bool</span> flag = <span class="keyword">true</span>;</div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; N; i++)</div><div class="line">      flag = flag &amp;&amp; (data[i] == m.data[i]);</div><div class="line">    <span class="keywordflow">return</span> flag;</div><div class="line">  }</div><div class="line">};</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">typedef</span> Container&lt;float, 3&gt; Point3f;</div><div class="line"><span class="keyword">typedef</span> Container&lt;unsigned char, 4&gt; Color4f;</div><div class="line"><span class="keyword">typedef</span> Container&lt;int, 3&gt; VertexIndex;</div><div class="line"></div><div class="line"><span class="keyword">struct </span>MyVertexInfo</div><div class="line">{</div><div class="line">  Color4f c;</div><div class="line">  <span class="keywordtype">float</span> density;</div><div class="line">  <span class="keywordtype">int</span> materialId;</div><div class="line"></div><div class="line">  <span class="keywordtype">bool</span> operator == (MyVertexInfo <span class="keyword">const</span> &amp; m)<span class="keyword"> const</span></div><div class="line"><span class="keyword">  </span>{</div><div class="line">    <span class="keywordflow">return</span> (c == m.c &amp;&amp; m.density == density &amp;&amp; m.materialId == materialId);</div><div class="line">  }</div><div class="line"></div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">struct </span>MyMaterialInfo</div><div class="line">{</div><div class="line">  Point3f kd;</div><div class="line">  Point3f ks;</div><div class="line">  <span class="keywordtype">float</span> rho;</div><div class="line"></div><div class="line">  <span class="keywordtype">bool</span> operator == (MyMaterialInfo <span class="keyword">const</span> &amp; m)<span class="keyword"> const</span></div><div class="line"><span class="keyword">  </span>{</div><div class="line">    <span class="keywordflow">return</span> (kd == m.kd &amp;&amp; ks == m.ks &amp;&amp; rho == m.rho);</div><div class="line">  }</div><div class="line">};</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">class </span>MyMesh</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  std::vector&lt;Point3f&gt; coordVec;</div><div class="line">  std::vector&lt;Point3f&gt; normalVec;</div><div class="line">  std::vector&lt;MyVertexInfo&gt; infoVec;</div><div class="line">  std::vector&lt;VertexIndex&gt; faceIndex;</div><div class="line">  std::vector&lt;MyMaterialInfo&gt; material;</div><div class="line"></div><div class="line">  <span class="keywordtype">void</span> FillMesh()</div><div class="line">  {</div><div class="line">    <span class="keywordtype">float</span> pos[] = { 1.0, 1.0, 1.0, -1.0, 1.0, -1.0, -1.0, -1.0, 1.0, 1.0, -1.0, -1.0 };</div><div class="line">    <span class="keywordtype">int</span> index[] = { 0, 1, 2, 0, 2, 3, 0, 3, 1, 3, 2, 1 };</div><div class="line">    <span class="keywordtype">float</span> norm[] = { 0.57735, 0.57735, 0.57735, -0.57735, 0.57735, -0.57735, -0.57735, -0.57735, 0.57735, 0.57735, -0.57735, -0.57735 };</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> color[] = { 68, 68, 68, 255, 177, 68, 177, 255, 177, 177, 68, 255, 68, 177, 177 };</div><div class="line">    <span class="keywordtype">float</span> density[] = { 3.5, 2.0, 4.0, 3.0 };</div><div class="line">    <span class="keywordtype">float</span> materialId[] = { 1, 0, -1, 1 };</div><div class="line">    <span class="keywordtype">float</span> materialValue[] = { 0.2, 0.3, 0.2, 0.5, 0.5, 0.6, 20.0, 0.1, 0.1, 0.1, 0.7, 0.5, 0.4, 1.0 };</div><div class="line">    coordVec.push_back(Point3f(pos, 3)); coordVec.push_back(Point3f(&amp;pos[3], 3)); coordVec.push_back(Point3f(&amp;pos[6], 3)); coordVec.push_back(Point3f(&amp;pos[9], 3));</div><div class="line">    normalVec.push_back(Point3f(norm, 3)); normalVec.push_back(Point3f(&amp;norm[3], 3)); normalVec.push_back(Point3f(&amp;norm[6], 3)); normalVec.push_back(Point3f(&amp;norm[9], 3));</div><div class="line">    MyVertexInfo info1 = { Color4f(color, 4), density[0], materialId[0] }; infoVec.push_back(info1);</div><div class="line">    MyVertexInfo info2 = { Color4f(&amp;color[4], 4), density[1], materialId[1] }; infoVec.push_back(info2);</div><div class="line">    MyVertexInfo info3 = { Color4f(&amp;color[8], 4), density[2], materialId[2] }; infoVec.push_back(info3);</div><div class="line">    MyVertexInfo info4 = { Color4f(&amp;color[12], 4), density[3], materialId[3] }; infoVec.push_back(info4);</div><div class="line">    faceIndex.push_back(VertexIndex(index, 3)); faceIndex.push_back(VertexIndex(&amp;index[3], 3)); faceIndex.push_back(VertexIndex(&amp;index[6], 3)); faceIndex.push_back(VertexIndex(&amp;index[9], 3));</div><div class="line">    MyMaterialInfo mat1 = { Point3f(materialValue, 3), Point3f(&amp;materialValue[3], 3), materialValue[6] }; material.push_back(mat1);</div><div class="line">    MyMaterialInfo mat2 = { Point3f(&amp;materialValue[7], 3), Point3f(&amp;materialValue[10], 3), materialValue[13] }; material.push_back(mat2);</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordtype">bool</span> operator == (MyMesh&amp; m)</div><div class="line">  {</div><div class="line">    <span class="keywordtype">bool</span> flag = (coordVec == m.coordVec);</div><div class="line">    flag = flag &amp;&amp; (normalVec == m.normalVec);</div><div class="line">    flag = flag &amp;&amp; (infoVec == m.infoVec);</div><div class="line">    flag = flag &amp;&amp; (faceIndex == m.faceIndex);</div><div class="line">    flag = flag &amp;&amp; (material == m.material);</div><div class="line">    <span class="keywordflow">return</span> flag;</div><div class="line">  }</div><div class="line">};</div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">bool</span> Load(<span class="keyword">const</span> <span class="keywordtype">char</span>* filename, MyMesh&amp; mesh)</div><div class="line">{</div><div class="line">  <span class="comment">//Get file info</span></div><div class="line">  <a class="code" href="classnanoply_1_1_info.html">nanoply::Info</a> info(filename);</div><div class="line">  <span class="keywordflow">if</span> (info.errInfo != <a class="code" href="namespacenanoply.html#ad4b8ed982a35dccc420ad316ce088909a83c76cf6e0399fa0ec883238a12f4b3c">nanoply::NNP_OK</a>)</div><div class="line">  {</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Invalid file format&quot;</span> &lt;&lt; std::endl;</div><div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">//Resize the element containers</span></div><div class="line">  <span class="keywordtype">int</span> vertCnt = info.GetVertexCount();</div><div class="line">  <span class="keywordflow">if</span> (vertCnt &lt;= 0)</div><div class="line">  {</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;The file does&#39;t contain any vertex.&quot;</span> &lt;&lt; std::endl;</div><div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line">  }</div><div class="line">  mesh.coordVec.resize(vertCnt);</div><div class="line">  mesh.normalVec.resize(vertCnt);</div><div class="line">  mesh.infoVec.resize(vertCnt);</div><div class="line">  <span class="keywordtype">int</span> faceCnt = info.GetFaceCount();</div><div class="line">  mesh.faceIndex.resize(faceCnt);</div><div class="line">  <span class="keywordtype">int</span> materialCnt = info.GetElementCount(std::string(<span class="stringliteral">&quot;material&quot;</span>));</div><div class="line">  mesh.material.resize(2);</div><div class="line"></div><div class="line">  <span class="comment">//Create the vertex properties descriptor (what ply property and where to save its data)</span></div><div class="line">  <a class="code" href="classnanoply_1_1_element_descriptor.html">nanoply::ElementDescriptor</a> vertex(<a class="code" href="namespacenanoply.html#a4697a70555689821c35ce6ca24ab4ceaa8a15eebda87cec440ca24a19e3a8a9de">nanoply::NNP_VERTEX_ELEM</a>);</div><div class="line">  <span class="keywordflow">if</span> (vertCnt &gt; 0)</div><div class="line">  {</div><div class="line">    vertex.dataDescriptor.push_back(<span class="keyword">new</span> <a class="code" href="classnanoply_1_1_data_descriptor.html">nanoply::DataDescriptor&lt;Point3f, 3, float&gt;</a>(<a class="code" href="namespacenanoply.html#abaffb15f6a6a9d6ad0ac44116f027f98aa3dd87122a8d6a7d25b6b1739108bff8">nanoply::NNP_PXYZ</a>, (*mesh.coordVec.begin()).V()));</div><div class="line">    vertex.dataDescriptor.push_back(<span class="keyword">new</span> <a class="code" href="classnanoply_1_1_data_descriptor.html">nanoply::DataDescriptor&lt;Point3f, 3, float&gt;</a>(<a class="code" href="namespacenanoply.html#abaffb15f6a6a9d6ad0ac44116f027f98a36b0f54b85673dbeb957d2eb059036a4">nanoply::NNP_NXYZ</a>, (*mesh.normalVec.begin()).V()));</div><div class="line">    vertex.dataDescriptor.push_back(<span class="keyword">new</span> <a class="code" href="classnanoply_1_1_data_descriptor.html">nanoply::DataDescriptor&lt;MyVertexInfo, 4, unsigned char&gt;</a>(<a class="code" href="namespacenanoply.html#abaffb15f6a6a9d6ad0ac44116f027f98ab266566b8dad5cfb2e5fc6be06b22adf">nanoply::NNP_CRGBA</a>, (*mesh.infoVec.begin()).c.V()));</div><div class="line">    vertex.dataDescriptor.push_back(<span class="keyword">new</span> <a class="code" href="classnanoply_1_1_data_descriptor.html">nanoply::DataDescriptor&lt;MyVertexInfo, 1, float&gt;</a>(<a class="code" href="namespacenanoply.html#abaffb15f6a6a9d6ad0ac44116f027f98a7413c1887cda89d6a8a3bda59c5ce538">nanoply::NNP_DENSITY</a>, &amp;(*mesh.infoVec.begin()).density));</div><div class="line">    vertex.dataDescriptor.push_back(<span class="keyword">new</span> <a class="code" href="classnanoply_1_1_data_descriptor.html">nanoply::DataDescriptor&lt;MyVertexInfo, 1, int&gt;</a>(std::string(<span class="stringliteral">&quot;materialId&quot;</span>), &amp;(*mesh.infoVec.begin()).materialId));</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">//Create the face properties descriptor (what ply property and where the data is stored)</span></div><div class="line">  <a class="code" href="classnanoply_1_1_element_descriptor.html">nanoply::ElementDescriptor</a> face(<a class="code" href="namespacenanoply.html#a4697a70555689821c35ce6ca24ab4ceaafb963ff4840f6fb3424402f97c6d244c">nanoply::NNP_FACE_ELEM</a>);</div><div class="line">  <span class="keywordflow">if</span> (mesh.faceIndex.size() &gt; 0)</div><div class="line">    face.dataDescriptor.push_back(<span class="keyword">new</span> <a class="code" href="classnanoply_1_1_data_descriptor.html">nanoply::DataDescriptor&lt;VertexIndex, 3, int&gt;</a>(<a class="code" href="namespacenanoply.html#abaffb15f6a6a9d6ad0ac44116f027f98a4924ac39e55a70ada4e0a9dd2f709b52">nanoply::NNP_FACE_VERTEX_LIST</a>, (*mesh.faceIndex.begin()).V()));</div><div class="line"></div><div class="line">  <span class="comment">//Create the material properties descriptor (what ply property and where the data is stored)</span></div><div class="line">  <a class="code" href="classnanoply_1_1_element_descriptor.html">nanoply::ElementDescriptor</a> material(std::string(<span class="stringliteral">&quot;material&quot;</span>));</div><div class="line">  <span class="keywordflow">if</span> (mesh.material.size() &gt; 0)</div><div class="line">  {</div><div class="line">    material.dataDescriptor.push_back(<span class="keyword">new</span> <a class="code" href="classnanoply_1_1_data_descriptor.html">nanoply::DataDescriptor&lt;MyMaterialInfo, 3, float&gt;</a>(std::string(<span class="stringliteral">&quot;kd&quot;</span>), (*mesh.material.begin()).kd.V()));</div><div class="line">    material.dataDescriptor.push_back(<span class="keyword">new</span> <a class="code" href="classnanoply_1_1_data_descriptor.html">nanoply::DataDescriptor&lt;MyMaterialInfo, 3, float&gt;</a>(std::string(<span class="stringliteral">&quot;ks&quot;</span>), (*mesh.material.begin()).ks.V()));</div><div class="line">    material.dataDescriptor.push_back(<span class="keyword">new</span> <a class="code" href="classnanoply_1_1_data_descriptor.html">nanoply::DataDescriptor&lt;MyMaterialInfo, 1, float&gt;</a>(std::string(<span class="stringliteral">&quot;rho&quot;</span>), &amp;(*mesh.material.begin()).rho));</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">//Create the mesh descriptor</span></div><div class="line">  std::vector&lt;nanoply::ElementDescriptor*&gt; meshDescr;</div><div class="line">  meshDescr.push_back(&amp;vertex);</div><div class="line">  meshDescr.push_back(&amp;face);</div><div class="line">  meshDescr.push_back(&amp;material);</div><div class="line"></div><div class="line">  <span class="comment">//Open the file and save the element data according the relative element descriptor</span></div><div class="line">  <a class="code" href="namespacenanoply.html#a212ad19f71e70a3f48dd3933fe3d780a">OpenModel</a>(info, meshDescr);</div><div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; vertex.dataDescriptor.size(); i++)</div><div class="line">    <span class="keyword">delete</span> vertex.dataDescriptor[i];</div><div class="line">  for (<span class="keywordtype">int</span> i = 0; i &lt; face.dataDescriptor.size(); i++)</div><div class="line">    <span class="keyword">delete</span> face.dataDescriptor[i];</div><div class="line">  for (<span class="keywordtype">int</span> i = 0; i &lt; material.dataDescriptor.size(); i++)</div><div class="line">    <span class="keyword">delete</span> material.dataDescriptor[i];</div><div class="line">  return (info.errInfo == <a class="code" href="namespacenanoply.html#ad4b8ed982a35dccc420ad316ce088909a83c76cf6e0399fa0ec883238a12f4b3c">nanoply::NNP_OK</a>);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">bool</span> Save(<span class="keyword">const</span> <span class="keywordtype">char</span>* filename, MyMesh&amp; mesh, <span class="keywordtype">bool</span> binary)</div><div class="line">{</div><div class="line">  <span class="comment">//Create the vector of vertex properties to save in the file</span></div><div class="line">  std::vector&lt;nanoply::PlyProperty&gt; vertexProp;</div><div class="line">  vertexProp.push_back(<a class="code" href="classnanoply_1_1_ply_property.html">nanoply::PlyProperty</a>(<a class="code" href="namespacenanoply.html#aa1843a24daa89f2cf948ec815062ffaaae831bd3adaed6fa6144e12a2ee9896a8">nanoply::NNP_FLOAT32</a>, <a class="code" href="namespacenanoply.html#abaffb15f6a6a9d6ad0ac44116f027f98aa3dd87122a8d6a7d25b6b1739108bff8">nanoply::NNP_PXYZ</a>));</div><div class="line">  vertexProp.push_back(<a class="code" href="classnanoply_1_1_ply_property.html">nanoply::PlyProperty</a>(<a class="code" href="namespacenanoply.html#aa1843a24daa89f2cf948ec815062ffaaae831bd3adaed6fa6144e12a2ee9896a8">nanoply::NNP_FLOAT32</a>, <a class="code" href="namespacenanoply.html#abaffb15f6a6a9d6ad0ac44116f027f98a36b0f54b85673dbeb957d2eb059036a4">nanoply::NNP_NXYZ</a>));</div><div class="line">  vertexProp.push_back(<a class="code" href="classnanoply_1_1_ply_property.html">nanoply::PlyProperty</a>(<a class="code" href="namespacenanoply.html#aa1843a24daa89f2cf948ec815062ffaaae831bd3adaed6fa6144e12a2ee9896a8">nanoply::NNP_FLOAT32</a>, <a class="code" href="namespacenanoply.html#abaffb15f6a6a9d6ad0ac44116f027f98a7413c1887cda89d6a8a3bda59c5ce538">nanoply::NNP_DENSITY</a>));</div><div class="line">  vertexProp.push_back(<a class="code" href="classnanoply_1_1_ply_property.html">nanoply::PlyProperty</a>(<a class="code" href="namespacenanoply.html#aa1843a24daa89f2cf948ec815062ffaaae831bd3adaed6fa6144e12a2ee9896a8">nanoply::NNP_FLOAT32</a>, <a class="code" href="namespacenanoply.html#abaffb15f6a6a9d6ad0ac44116f027f98ab266566b8dad5cfb2e5fc6be06b22adf">nanoply::NNP_CRGBA</a>));</div><div class="line">  vertexProp.push_back(<a class="code" href="classnanoply_1_1_ply_property.html">nanoply::PlyProperty</a>(<a class="code" href="namespacenanoply.html#aa1843a24daa89f2cf948ec815062ffaaa758b0e45e9c0026eb221f91c41c2629a">nanoply::NNP_INT32</a>, <span class="stringliteral">&quot;materialId&quot;</span>));</div><div class="line"></div><div class="line">  <span class="comment">//Create the vector of face properties to save in the file</span></div><div class="line">  std::vector&lt;nanoply::PlyProperty&gt; faceProp;</div><div class="line">  faceProp.push_back(<a class="code" href="classnanoply_1_1_ply_property.html">nanoply::PlyProperty</a>(<a class="code" href="namespacenanoply.html#aa1843a24daa89f2cf948ec815062ffaaafef80f04d99061e46b3ddb20307a9f28">nanoply::NNP_LIST_UINT8_UINT32</a>, <a class="code" href="namespacenanoply.html#abaffb15f6a6a9d6ad0ac44116f027f98a4924ac39e55a70ada4e0a9dd2f709b52">nanoply::NNP_FACE_VERTEX_LIST</a>));</div><div class="line"></div><div class="line">  <span class="comment">//Create the vector of material properties to save in the file</span></div><div class="line">  std::vector&lt;nanoply::PlyProperty&gt; materialProp;</div><div class="line">  materialProp.push_back(<a class="code" href="classnanoply_1_1_ply_property.html">nanoply::PlyProperty</a>(<a class="code" href="namespacenanoply.html#aa1843a24daa89f2cf948ec815062ffaaa8027c307cd1ee8401b5ebc3aa1d4a2ac">nanoply::NNP_LIST_UINT8_FLOAT32</a>, <span class="stringliteral">&quot;kd&quot;</span>));</div><div class="line">  materialProp.push_back(<a class="code" href="classnanoply_1_1_ply_property.html">nanoply::PlyProperty</a>(<a class="code" href="namespacenanoply.html#aa1843a24daa89f2cf948ec815062ffaaa8027c307cd1ee8401b5ebc3aa1d4a2ac">nanoply::NNP_LIST_UINT8_FLOAT32</a>, <span class="stringliteral">&quot;ks&quot;</span>));</div><div class="line">  materialProp.push_back(<a class="code" href="classnanoply_1_1_ply_property.html">nanoply::PlyProperty</a>(<a class="code" href="namespacenanoply.html#aa1843a24daa89f2cf948ec815062ffaaae831bd3adaed6fa6144e12a2ee9896a8">nanoply::NNP_FLOAT32</a>, <span class="stringliteral">&quot;rho&quot;</span>));</div><div class="line"></div><div class="line">  <span class="comment">//Create the PlyElement</span></div><div class="line">  <a class="code" href="classnanoply_1_1_ply_element.html">nanoply::PlyElement</a> vertexElem(<a class="code" href="namespacenanoply.html#a4697a70555689821c35ce6ca24ab4ceaa8a15eebda87cec440ca24a19e3a8a9de">nanoply::NNP_VERTEX_ELEM</a>, vertexProp, mesh.coordVec.size());</div><div class="line">  <a class="code" href="classnanoply_1_1_ply_element.html">nanoply::PlyElement</a> faceElem(<a class="code" href="namespacenanoply.html#a4697a70555689821c35ce6ca24ab4ceaafb963ff4840f6fb3424402f97c6d244c">nanoply::NNP_FACE_ELEM</a>, faceProp, mesh.faceIndex.size());</div><div class="line">  <a class="code" href="classnanoply_1_1_ply_element.html">nanoply::PlyElement</a> materialElem(std::string(<span class="stringliteral">&quot;material&quot;</span>), materialProp, mesh.material.size());</div><div class="line"></div><div class="line">  <span class="comment">//Create the Info object with the data to save in the header</span></div><div class="line">  <a class="code" href="classnanoply_1_1_info.html">nanoply::Info</a> infoSave;</div><div class="line">  infoSave.<a class="code" href="classnanoply_1_1_info.html#a63196e390e6c1fc8c51d53fd786c56fa">filename</a> = filename;</div><div class="line">  infoSave.binary = binary;</div><div class="line">  infoSave.AddPlyElement(vertexElem);</div><div class="line">  infoSave.AddPlyElement(faceElem);</div><div class="line">  infoSave.AddPlyElement(materialElem);</div><div class="line"></div><div class="line">  <span class="comment">//Create the vertex properties descriptor (what ply property and where the data is stored)</span></div><div class="line">  <a class="code" href="classnanoply_1_1_element_descriptor.html">nanoply::ElementDescriptor</a> vertex(<a class="code" href="namespacenanoply.html#a4697a70555689821c35ce6ca24ab4ceaa8a15eebda87cec440ca24a19e3a8a9de">nanoply::NNP_VERTEX_ELEM</a>);</div><div class="line">  <span class="keywordflow">if</span> (mesh.coordVec.size() &gt; 0)</div><div class="line">  {</div><div class="line">    vertex.dataDescriptor.push_back(<span class="keyword">new</span> <a class="code" href="classnanoply_1_1_data_descriptor.html">nanoply::DataDescriptor&lt;Point3f, 3, float&gt;</a>(<a class="code" href="namespacenanoply.html#abaffb15f6a6a9d6ad0ac44116f027f98aa3dd87122a8d6a7d25b6b1739108bff8">nanoply::NNP_PXYZ</a>, (*mesh.coordVec.begin()).V()));</div><div class="line">    vertex.dataDescriptor.push_back(<span class="keyword">new</span> <a class="code" href="classnanoply_1_1_data_descriptor.html">nanoply::DataDescriptor&lt;Point3f, 3, float&gt;</a>(<a class="code" href="namespacenanoply.html#abaffb15f6a6a9d6ad0ac44116f027f98a36b0f54b85673dbeb957d2eb059036a4">nanoply::NNP_NXYZ</a>, (*mesh.normalVec.begin()).V()));</div><div class="line">    vertex.dataDescriptor.push_back(<span class="keyword">new</span> <a class="code" href="classnanoply_1_1_data_descriptor.html">nanoply::DataDescriptor&lt;MyVertexInfo, 4, unsigned char&gt;</a>(<a class="code" href="namespacenanoply.html#abaffb15f6a6a9d6ad0ac44116f027f98ab266566b8dad5cfb2e5fc6be06b22adf">nanoply::NNP_CRGBA</a>, (*mesh.infoVec.begin()).c.V()));</div><div class="line">    vertex.dataDescriptor.push_back(<span class="keyword">new</span> <a class="code" href="classnanoply_1_1_data_descriptor.html">nanoply::DataDescriptor&lt;MyVertexInfo, 1, float&gt;</a>(<a class="code" href="namespacenanoply.html#abaffb15f6a6a9d6ad0ac44116f027f98a7413c1887cda89d6a8a3bda59c5ce538">nanoply::NNP_DENSITY</a>, &amp;(*mesh.infoVec.begin()).density));</div><div class="line">    vertex.dataDescriptor.push_back(<span class="keyword">new</span> <a class="code" href="classnanoply_1_1_data_descriptor.html">nanoply::DataDescriptor&lt;MyVertexInfo, 1, int&gt;</a>(std::string(<span class="stringliteral">&quot;materialId&quot;</span>), &amp;(*mesh.infoVec.begin()).materialId));</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">//Create the face properties descriptor (what ply property and where the data is stored)</span></div><div class="line">  <a class="code" href="classnanoply_1_1_element_descriptor.html">nanoply::ElementDescriptor</a> face(<a class="code" href="namespacenanoply.html#a4697a70555689821c35ce6ca24ab4ceaafb963ff4840f6fb3424402f97c6d244c">nanoply::NNP_FACE_ELEM</a>);</div><div class="line">  <span class="keywordflow">if</span> (mesh.faceIndex.size() &gt; 0)</div><div class="line">    face.dataDescriptor.push_back(<span class="keyword">new</span> <a class="code" href="classnanoply_1_1_data_descriptor.html">nanoply::DataDescriptor&lt;VertexIndex, 3, int&gt;</a>(<a class="code" href="namespacenanoply.html#abaffb15f6a6a9d6ad0ac44116f027f98a4924ac39e55a70ada4e0a9dd2f709b52">nanoply::NNP_FACE_VERTEX_LIST</a>, (*mesh.faceIndex.begin()).V()));</div><div class="line"></div><div class="line">  <span class="comment">//Create the material properties descriptor (what ply property and where the data is stored)</span></div><div class="line">  <a class="code" href="classnanoply_1_1_element_descriptor.html">nanoply::ElementDescriptor</a> material(std::string(<span class="stringliteral">&quot;material&quot;</span>));</div><div class="line">  <span class="keywordflow">if</span> (mesh.material.size() &gt; 0)</div><div class="line">  {</div><div class="line">    material.dataDescriptor.push_back(<span class="keyword">new</span> <a class="code" href="classnanoply_1_1_data_descriptor.html">nanoply::DataDescriptor&lt;MyMaterialInfo, 3, float&gt;</a>(std::string(<span class="stringliteral">&quot;kd&quot;</span>), (*mesh.material.begin()).kd.V()));</div><div class="line">    material.dataDescriptor.push_back(<span class="keyword">new</span> <a class="code" href="classnanoply_1_1_data_descriptor.html">nanoply::DataDescriptor&lt;MyMaterialInfo, 3, float&gt;</a>(std::string(<span class="stringliteral">&quot;ks&quot;</span>), (*mesh.material.begin()).ks.V()));</div><div class="line">    material.dataDescriptor.push_back(<span class="keyword">new</span> <a class="code" href="classnanoply_1_1_data_descriptor.html">nanoply::DataDescriptor&lt;MyMaterialInfo, 1, float&gt;</a>(std::string(<span class="stringliteral">&quot;rho&quot;</span>), &amp;(*mesh.material.begin()).rho));</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">//Create the mesh descriptor</span></div><div class="line">  std::vector&lt;nanoply::ElementDescriptor*&gt; meshDescr;</div><div class="line">  meshDescr.push_back(&amp;vertex);</div><div class="line">  meshDescr.push_back(&amp;face);</div><div class="line">  meshDescr.push_back(&amp;material);</div><div class="line"></div><div class="line">  <span class="comment">//Save the file</span></div><div class="line">  <span class="keywordtype">bool</span> result = <a class="code" href="namespacenanoply.html#a3e77eb704a8c0d119e78b4e8ac08c941">nanoply::SaveModel</a>(infoSave.filename, meshDescr, infoSave);</div><div class="line"></div><div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; vertex.dataDescriptor.size(); i++)</div><div class="line">    <span class="keyword">delete</span> vertex.dataDescriptor[i];</div><div class="line">  for (<span class="keywordtype">int</span> i = 0; i &lt; face.dataDescriptor.size(); i++)</div><div class="line">    <span class="keyword">delete</span> face.dataDescriptor[i];</div><div class="line">  for (<span class="keywordtype">int</span> i = 0; i &lt; material.dataDescriptor.size(); i++)</div><div class="line">    <span class="keyword">delete</span> material.dataDescriptor[i];</div><div class="line">  <span class="keywordflow">return</span> result;</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main()</div><div class="line">{</div><div class="line">  MyMesh mesh1;</div><div class="line">  mesh1.FillMesh();</div><div class="line">  Save(<span class="stringliteral">&quot;example_ascii.ply&quot;</span>, mesh1, <span class="keyword">false</span>);</div><div class="line">  Save(<span class="stringliteral">&quot;example_binary.ply&quot;</span>, mesh1, <span class="keyword">true</span>);</div><div class="line">  MyMesh mesh2, mesh3;</div><div class="line">  Load(<span class="stringliteral">&quot;example_ascii.ply&quot;</span>, mesh2);</div><div class="line">  Load(<span class="stringliteral">&quot;example_binary.ply&quot;</span>, mesh3);</div><div class="line">  <span class="keywordflow">if</span> (mesh2 == mesh1)</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Write and read ASCII ply file:  SUCCESS\n&quot;</span>;</div><div class="line">  <span class="keywordflow">else</span></div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Write and read ASCII ply file:  FAIL\n&quot;</span>;</div><div class="line">  <span class="keywordflow">if</span> (mesh3 == mesh1)</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Write and read binary ply file:  SUCCESS\n&quot;</span>;</div><div class="line">  <span class="keywordflow">else</span></div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Write and read binary ply file:  FAIL\n&quot;</span>;</div><div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line">}</div></div><!-- fragment --><p>The following code shows how to open and save a Ply file using a VCGLib mesh.</p>
<div class="fragment"><div class="line"><span class="comment">/****************************************************************************</span></div><div class="line"><span class="comment">* NanoPLY                                                                   *</span></div><div class="line"><span class="comment">* NanoPLY is a C++11 header-only library to read and write PLY file         *</span></div><div class="line"><span class="comment">*                                                                           *</span></div><div class="line"><span class="comment">* Copyright(C) 2014-2015                                                    *</span></div><div class="line"><span class="comment">* Visual Computing Lab                                                      *</span></div><div class="line"><span class="comment">* ISTI - Italian National Research Council                                  *</span></div><div class="line"><span class="comment">*                                                                           *</span></div><div class="line"><span class="comment">* This Source Code Form is subject to the terms of the Mozilla Public       *</span></div><div class="line"><span class="comment">* License, v. 2.0. If a copy of the MPL was not distributed with this       *</span></div><div class="line"><span class="comment">* file, You can obtain one at http://mozilla.org/MPL/2.0/.                  *</span></div><div class="line"><span class="comment">*                                                                           *</span></div><div class="line"><span class="comment">****************************************************************************/</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="nanoply_wrapper_8hpp.html">wrap/nanoply/include/nanoplyWrapper.hpp</a>&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;vcg/complex/complex.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;vcg/complex/algorithms/create/platonic.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;vcg/complex/algorithms/update/normal.h&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">struct </span>Material</div><div class="line">{</div><div class="line">  vcg::Point3f kd;</div><div class="line">  vcg::Point3f ks;</div><div class="line">  <span class="keywordtype">float</span> rho;</div><div class="line">};</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">class </span>MyVertex;</div><div class="line"><span class="keyword">class </span>MyFace;</div><div class="line"></div><div class="line"><span class="keyword">class </span>MyUsedTypes : <span class="keyword">public</span> vcg::UsedTypes &lt; vcg::Use&lt; MyVertex &gt;::AsVertexType, vcg::Use&lt; MyFace &gt;::AsFaceType&gt;{};</div><div class="line"><span class="keyword">class </span>MyVertex : <span class="keyword">public</span> vcg::Vertex &lt;  MyUsedTypes, vcg::vertex::Coord3f, vcg::vertex::Normal3f, vcg::vertex::Color4b, vcg::vertex::Radiusf, vcg::vertex::BitFlags&gt;{};</div><div class="line"><span class="keyword">class </span>MyFace : <span class="keyword">public</span> vcg::Face &lt;  MyUsedTypes, vcg::face::VertexRef, vcg::face::Normal3f, vcg::face::BitFlags&gt;{};</div><div class="line"></div><div class="line"><span class="keyword">class </span>MyMesh : <span class="keyword">public</span> vcg::tri::TriMesh &lt; std::vector&lt; MyVertex &gt;, std::vector&lt; MyFace &gt; &gt;</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  MyMesh::PerVertexAttributeHandle&lt;int&gt; vertexMaterial;</div><div class="line">  MyMesh::PerFaceAttributeHandle&lt;MyVertex::CoordType&gt; faceBarycenter;</div><div class="line">  MyMesh::PerMeshAttributeHandle&lt;std::vector&lt;Material&gt;&gt; material;</div><div class="line">    </div><div class="line">  MyMesh()</div><div class="line">  {</div><div class="line">    vertexMaterial = vcg::tri::Allocator&lt;MyMesh&gt;::AddPerVertexAttribute&lt;<span class="keywordtype">int</span>&gt;(*<span class="keyword">this</span>, std::string(<span class="stringliteral">&quot;materialId&quot;</span>));</div><div class="line">    faceBarycenter = vcg::tri::Allocator&lt;MyMesh&gt;::AddPerFaceAttribute&lt;MyVertex::CoordType&gt;(*<span class="keyword">this</span>, std::string(<span class="stringliteral">&quot;barycenter&quot;</span>));</div><div class="line">    material = vcg::tri::Allocator&lt;MyMesh&gt;::AddPerMeshAttribute&lt;std::vector&lt;Material&gt;&gt;(*<span class="keyword">this</span>, std::string(<span class="stringliteral">&quot;material&quot;</span>));</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordtype">void</span> FillMesh()</div><div class="line">  {</div><div class="line">    vcg::tri::Icosahedron(*<span class="keyword">this</span>);</div><div class="line">    vcg::tri::UpdateNormal&lt;MyMesh&gt;::PerFaceNormalized(*<span class="keyword">this</span>);</div><div class="line">    vcg::tri::UpdateNormal&lt;MyMesh&gt;::PerVertexNormalized(*<span class="keyword">this</span>);</div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> tempC = 255 / vert.size();</div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; vert.size(); i++)</div><div class="line">    {</div><div class="line">      <span class="keywordflow">if</span> (i &lt; 2)</div><div class="line">        vertexMaterial[i] = -1;</div><div class="line">      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i &lt; vert.size() / 2)</div><div class="line">        vertexMaterial[i] = 0;</div><div class="line">      <span class="keywordflow">else</span></div><div class="line">        vertexMaterial[i] = 1;</div><div class="line">      vert[i].R() = i*i / 2.0f;</div><div class="line">      vert[i].C() = vcg::Color4b(tempC*i, tempC*i, tempC*i, 255);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; face.size(); i++)</div><div class="line">     faceBarycenter[i] = vcg::Barycenter(face[i]);</div><div class="line"></div><div class="line">    material().resize(2);</div><div class="line">    material()[0] = { vcg::Point3f(0.1f, 0.2f, 0.3f), vcg::Point3f(0.3f, 0.3f, 0.3f), 5.0f };</div><div class="line">    material()[1] = { vcg::Point3f(0.1f, 0.1f, 0.1f), vcg::Point3f(0.5f, 0.3f, 0.4f), 50.0f };</div><div class="line">  }</div><div class="line"></div><div class="line">};</div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">bool</span> Load(<span class="keyword">const</span> <span class="keywordtype">char</span>* filename, MyMesh&amp; mesh)</div><div class="line">{</div><div class="line">  <span class="comment">//Create the data descriport for the custom attributes</span></div><div class="line">  <a class="code" href="classnanoply_1_1_nano_ply_wrapper_1_1_custom_attribute_descriptor.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::CustomAttributeDescriptor</a> customAttrib;</div><div class="line">  customAttrib.<a class="code" href="classnanoply_1_1_nano_ply_wrapper_1_1_custom_attribute_descriptor.html#a55de8b0f697c14687250bc548574af6f">GetMeshAttrib</a>(filename);</div><div class="line">  <span class="keywordtype">int</span> count = customAttrib.<a class="code" href="classnanoply_1_1_nano_ply_wrapper_1_1_custom_attribute_descriptor.html#ad0286904bf9c849738f125f308bfff53">meshAttribCnt</a>[<span class="stringliteral">&quot;material&quot;</span>];</div><div class="line">  mesh.material().resize(count);</div><div class="line">  customAttrib.<a class="code" href="classnanoply_1_1_nano_ply_wrapper_1_1_custom_attribute_descriptor.html#ac9371b5addd3cb6d9f376d515687697d">AddVertexAttribDescriptor</a>&lt;int, int, 1&gt;(std::string(<span class="stringliteral">&quot;materialId&quot;</span>), <a class="code" href="namespacenanoply.html#aa1843a24daa89f2cf948ec815062ffaaa758b0e45e9c0026eb221f91c41c2629a">nanoply::NNP_INT32</a>, NULL);</div><div class="line">  customAttrib.<a class="code" href="classnanoply_1_1_nano_ply_wrapper_1_1_custom_attribute_descriptor.html#a5dca3b58385f478a1de3fa627508bd71">AddFaceAttribDescriptor</a>&lt;vcg::Point3f, float, 3&gt;(std::string(<span class="stringliteral">&quot;barycenter&quot;</span>), <a class="code" href="namespacenanoply.html#aa1843a24daa89f2cf948ec815062ffaaa8027c307cd1ee8401b5ebc3aa1d4a2ac">nanoply::NNP_LIST_UINT8_FLOAT32</a>, NULL);</div><div class="line">    <span class="keywordflow">if</span> (count &gt; 0)</div><div class="line">    {</div><div class="line">        customAttrib.<a class="code" href="classnanoply_1_1_nano_ply_wrapper_1_1_custom_attribute_descriptor.html#a94ae07f619e34ab1a6cc926313c38a23">AddMeshAttribDescriptor</a>&lt;Material, float, 3&gt;(std::string(<span class="stringliteral">&quot;material&quot;</span>), std::string(<span class="stringliteral">&quot;kd&quot;</span>), <a class="code" href="namespacenanoply.html#aa1843a24daa89f2cf948ec815062ffaaae831bd3adaed6fa6144e12a2ee9896a8">nanoply::NNP_FLOAT32</a>, mesh.material()[0].kd.V());</div><div class="line">        customAttrib.<a class="code" href="classnanoply_1_1_nano_ply_wrapper_1_1_custom_attribute_descriptor.html#a94ae07f619e34ab1a6cc926313c38a23">AddMeshAttribDescriptor</a>&lt;Material, float, 3&gt;(std::string(<span class="stringliteral">&quot;material&quot;</span>), std::string(<span class="stringliteral">&quot;ks&quot;</span>), <a class="code" href="namespacenanoply.html#aa1843a24daa89f2cf948ec815062ffaaae831bd3adaed6fa6144e12a2ee9896a8">nanoply::NNP_FLOAT32</a>, mesh.material()[0].ks.V());</div><div class="line">        customAttrib.<a class="code" href="classnanoply_1_1_nano_ply_wrapper_1_1_custom_attribute_descriptor.html#a94ae07f619e34ab1a6cc926313c38a23">AddMeshAttribDescriptor</a>&lt;Material, float, 1&gt;(std::string(<span class="stringliteral">&quot;material&quot;</span>), std::string(<span class="stringliteral">&quot;rho&quot;</span>), <a class="code" href="namespacenanoply.html#aa1843a24daa89f2cf948ec815062ffaaae831bd3adaed6fa6144e12a2ee9896a8">nanoply::NNP_FLOAT32</a>, &amp;mesh.material()[0].rho);</div><div class="line">    }</div><div class="line"></div><div class="line">  <span class="comment">//Load the ply file</span></div><div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mask = 0;</div><div class="line">  mask |= <a class="code" href="classnanoply_1_1_nano_ply_wrapper.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::IO_VERTCOORD</a>;</div><div class="line">  mask |= <a class="code" href="classnanoply_1_1_nano_ply_wrapper.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::IO_VERTNORMAL</a>;</div><div class="line">  mask |= <a class="code" href="classnanoply_1_1_nano_ply_wrapper.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::IO_VERTCOLOR</a>;</div><div class="line">  mask |= <a class="code" href="classnanoply_1_1_nano_ply_wrapper.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::IO_VERTRADIUS</a>;</div><div class="line">  mask |= <a class="code" href="classnanoply_1_1_nano_ply_wrapper.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::IO_VERTATTRIB</a>;</div><div class="line">  mask |= <a class="code" href="classnanoply_1_1_nano_ply_wrapper.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::IO_FACEINDEX</a>;</div><div class="line">  mask |= <a class="code" href="classnanoply_1_1_nano_ply_wrapper.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::IO_FACENORMAL</a>;</div><div class="line">  mask |= <a class="code" href="classnanoply_1_1_nano_ply_wrapper.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::IO_FACEATTRIB</a>;</div><div class="line">  mask |= <a class="code" href="classnanoply_1_1_nano_ply_wrapper.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::IO_MESHATTRIB</a>;</div><div class="line">    <span class="keywordflow">return</span> (<a class="code" href="classnanoply_1_1_nano_ply_wrapper.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::LoadModel</a>(filename, mesh, mask, customAttrib) != 0);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">bool</span> Save(<span class="keyword">const</span> <span class="keywordtype">char</span>* filename, MyMesh&amp; mesh, <span class="keywordtype">bool</span> binary)</div><div class="line">{</div><div class="line">  <span class="comment">//Create the data descriport for the custom attributes</span></div><div class="line">  <a class="code" href="classnanoply_1_1_nano_ply_wrapper_1_1_custom_attribute_descriptor.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::CustomAttributeDescriptor</a> customAttrib;</div><div class="line">  customAttrib.<a class="code" href="classnanoply_1_1_nano_ply_wrapper_1_1_custom_attribute_descriptor.html#ac9371b5addd3cb6d9f376d515687697d">AddVertexAttribDescriptor</a>&lt;int, int, 1&gt;(std::string(<span class="stringliteral">&quot;materialId&quot;</span>), <a class="code" href="namespacenanoply.html#aa1843a24daa89f2cf948ec815062ffaaa758b0e45e9c0026eb221f91c41c2629a">nanoply::NNP_INT32</a>, &amp;mesh.vertexMaterial[0]);</div><div class="line">  customAttrib.<a class="code" href="classnanoply_1_1_nano_ply_wrapper_1_1_custom_attribute_descriptor.html#a5dca3b58385f478a1de3fa627508bd71">AddFaceAttribDescriptor</a>&lt;vcg::Point3f, float, 3&gt;(std::string(<span class="stringliteral">&quot;barycenter&quot;</span>), <a class="code" href="namespacenanoply.html#aa1843a24daa89f2cf948ec815062ffaaa8027c307cd1ee8401b5ebc3aa1d4a2ac">nanoply::NNP_LIST_UINT8_FLOAT32</a>, mesh.faceBarycenter[0].V());</div><div class="line">    <span class="keywordflow">if</span> (mesh.material().size() &gt; 0)</div><div class="line">    {</div><div class="line">        customAttrib.<a class="code" href="classnanoply_1_1_nano_ply_wrapper_1_1_custom_attribute_descriptor.html#ab26dea1a7a1cb91befc26e9f67579724">AddMeshAttrib</a>(std::string(<span class="stringliteral">&quot;material&quot;</span>), mesh.material().size());</div><div class="line">        customAttrib.<a class="code" href="classnanoply_1_1_nano_ply_wrapper_1_1_custom_attribute_descriptor.html#a94ae07f619e34ab1a6cc926313c38a23">AddMeshAttribDescriptor</a>&lt;Material, float, 3&gt;(std::string(<span class="stringliteral">&quot;material&quot;</span>), std::string(<span class="stringliteral">&quot;kd&quot;</span>), <a class="code" href="namespacenanoply.html#aa1843a24daa89f2cf948ec815062ffaaa8027c307cd1ee8401b5ebc3aa1d4a2ac">nanoply::NNP_LIST_UINT8_FLOAT32</a>, mesh.material()[0].kd.V());</div><div class="line">        customAttrib.<a class="code" href="classnanoply_1_1_nano_ply_wrapper_1_1_custom_attribute_descriptor.html#a94ae07f619e34ab1a6cc926313c38a23">AddMeshAttribDescriptor</a>&lt;Material, float, 3&gt;(std::string(<span class="stringliteral">&quot;material&quot;</span>), std::string(<span class="stringliteral">&quot;ks&quot;</span>), <a class="code" href="namespacenanoply.html#aa1843a24daa89f2cf948ec815062ffaaa8027c307cd1ee8401b5ebc3aa1d4a2ac">nanoply::NNP_LIST_UINT8_FLOAT32</a>, mesh.material()[0].ks.V());</div><div class="line">        customAttrib.<a class="code" href="classnanoply_1_1_nano_ply_wrapper_1_1_custom_attribute_descriptor.html#a94ae07f619e34ab1a6cc926313c38a23">AddMeshAttribDescriptor</a>&lt;Material, float, 1&gt;(std::string(<span class="stringliteral">&quot;material&quot;</span>), std::string(<span class="stringliteral">&quot;rho&quot;</span>), <a class="code" href="namespacenanoply.html#aa1843a24daa89f2cf948ec815062ffaaae831bd3adaed6fa6144e12a2ee9896a8">nanoply::NNP_FLOAT32</a>, &amp;mesh.material()[0].rho);</div><div class="line">    }</div><div class="line"></div><div class="line">  <span class="comment">//Save the ply file</span></div><div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mask = 0;</div><div class="line">  mask |= <a class="code" href="classnanoply_1_1_nano_ply_wrapper.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::IO_VERTCOORD</a>;</div><div class="line">  mask |= <a class="code" href="classnanoply_1_1_nano_ply_wrapper.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::IO_VERTNORMAL</a>;</div><div class="line">  mask |= <a class="code" href="classnanoply_1_1_nano_ply_wrapper.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::IO_VERTCOLOR</a>;</div><div class="line">  mask |= <a class="code" href="classnanoply_1_1_nano_ply_wrapper.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::IO_VERTRADIUS</a>;</div><div class="line">  mask |= <a class="code" href="classnanoply_1_1_nano_ply_wrapper.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::IO_VERTATTRIB</a>;</div><div class="line">  mask |= <a class="code" href="classnanoply_1_1_nano_ply_wrapper.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::IO_FACEINDEX</a>;</div><div class="line">  mask |= <a class="code" href="classnanoply_1_1_nano_ply_wrapper.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::IO_FACENORMAL</a>;</div><div class="line">  mask |= <a class="code" href="classnanoply_1_1_nano_ply_wrapper.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::IO_FACEATTRIB</a>;</div><div class="line">  mask |= <a class="code" href="classnanoply_1_1_nano_ply_wrapper.html">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::IO_MESHATTRIB</a>;</div><div class="line">  <span class="keywordflow">return</span> <a class="code" href="classnanoply_1_1_nano_ply_wrapper.html#a9b72fd811818473ba7829565a5751ee0">nanoply::NanoPlyWrapper&lt;MyMesh&gt;::SaveModel</a>(filename, mesh, mask, customAttrib, binary);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main()</div><div class="line">{</div><div class="line">  MyMesh mesh1;</div><div class="line">  mesh1.FillMesh();</div><div class="line">  Save(<span class="stringliteral">&quot;example_ascii.ply&quot;</span>, mesh1, <span class="keyword">false</span>);</div><div class="line">  Save(<span class="stringliteral">&quot;example_binary.ply&quot;</span>, mesh1, <span class="keyword">true</span>);</div><div class="line">  MyMesh mesh2, mesh3;</div><div class="line">  Load(<span class="stringliteral">&quot;example_ascii.ply&quot;</span>, mesh2);</div><div class="line">  Load(<span class="stringliteral">&quot;example_binary.ply&quot;</span>, mesh3);</div><div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Dec 15 2017 19:50:42 for NanoPLY by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
